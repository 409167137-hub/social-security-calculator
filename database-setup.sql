-- ============================================
-- 五险一金计算器 - 数据库表结构
-- 在 Supabase SQL Editor 中执行此脚本
-- ============================================

-- cities 表（城市社保标准表）
CREATE TABLE cities (
  id INT PRIMARY KEY,
  city_name TEXT NOT NULL,
  year TEXT NOT NULL,
  base_min INT NOT NULL,
  base_max INT NOT NULL,
  rate FLOAT NOT NULL
);

-- salaries 表（员工工资表）
CREATE TABLE salaries (
  id INT PRIMARY KEY,
  employee_id TEXT NOT NULL,
  employee_name TEXT NOT NULL,
  month TEXT NOT NULL,
  salary_amount INT NOT NULL
);

-- results 表（计算结果表）
CREATE TABLE results (
  id INT PRIMARY KEY,
  employee_name TEXT NOT NULL,
  avg_salary FLOAT NOT NULL,
  contribution_base FLOAT NOT NULL,
  company_fee FLOAT NOT NULL
);

-- ============================================
-- 可选：插入测试数据
-- ============================================

-- 插入佛山城市测试数据
INSERT INTO cities (id, city_name, year, base_min, base_max, rate) VALUES
(1, '佛山', '2024', 4546, 26421, 0.14);

-- 插入员工工资测试数据
INSERT INTO salaries (id, employee_id, employee_name, month, salary_amount) VALUES
(1, '1', '张三', '202401', 30000),
(2, '1', '张三', '202402', 29000),
(3, '1', '张三', '202403', 30000),
(4, '1', '张三', '202404', 30000),
(5, '1', '张三', '202405', 30000),
(6, '1', '张三', '202406', 30000),
(7, '1', '张三', '202407', 30000),
(8, '1', '张三', '202408', 30000),
(9, '1', '张三', '202409', 30000),
(10, '1', '张三', '202410', 30000),
(11, '1', '张三', '202411', 30000),
(12, '1', '张三', '202412', 30000),
(13, '2', '李四', '202401', 15000),
(14, '2', '李四', '202402', 15000),
(15, '2', '李四', '202403', 15000),
(16, '2', '李四', '202404', 15000),
(17, '2', '李四', '202405', 15000),
(18, '2', '李四', '202406', 15000),
(19, '2', '李四', '202407', 15000),
(20, '2', '李四', '202408', 15000),
(21, '2', '李四', '202409', 15000),
(22, '2', '李四', '202410', 15000),
(23, '2', '李四', '202411', 15000),
(24, '2', '李四', '202412', 15000),
(25, '3', '王五', '202401', 4000),
(26, '3', '王五', '202402', 4000),
(27, '3', '王五', '202403', 4000),
(28, '3', '王五', '202404', 4000),
(29, '3', '王五', '202405', 4000),
(30, '3', '王五', '202406', 4000),
(31, '3', '王五', '202407', 4000),
(32, '3', '王五', '202408', 4000),
(33, '3', '王五', '202409', 4000),
(34, '3', '王五', '202410', 4000),
(35, '3', '王五', '202411', 4000),
(36, '3', '王五', '202412', 4000);
